\hypertarget{namespacemakeopticalelements}{}\section{makeopticalelements Module Reference}
\label{namespacemakeopticalelements}\index{makeopticalelements@{makeopticalelements}}


module for building symplectic matrices for optical elements  


\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine \hyperlink{namespacemakeopticalelements_a593a6ee34afdeebc8b4667791c8a144f}{make\+\_\+bs} (nspace, nspec, symp\+\_\+mat, m1, m2, theta)
\begin{DoxyCompactList}\small\item\em makes beamsplitter symplectic matrix  takes in an allocated matrix for the beamsplitter matrix to be written to uses the private ident\+\_\+spec, spatial\+\_\+work, n\+\_\+work arrays \end{DoxyCompactList}\item 
subroutine \hyperlink{namespacemakeopticalelements_a6658c2ce879c0bc4b2e5918064a6a308}{make\+\_\+sq} (nspace, nspec, symp\+\_\+mat, m1, m2, alpha, beta)
\begin{DoxyCompactList}\small\item\em make symplectic squeezing matrix from exponetiated J\+SA  a lot is broken... \end{DoxyCompactList}\item 
real(kind=dp) function \hyperlink{namespacemakeopticalelements_af1a18704c55aa2efeb60157c81a80723}{g4} (ft, nspec)
\begin{DoxyCompactList}\small\item\em calculates g4 using matrix elements sum  \end{DoxyCompactList}\item 
real(kind=dp) function \hyperlink{namespacemakeopticalelements_a0649740479f47221d009b8d496b78c8b}{amp} (a)
\begin{DoxyCompactList}\small\item\em returns the absolute value squared $\vert$a$\vert$$\ast$$\ast$2 \end{DoxyCompactList}\item 
complex(kind=dp) function \hyperlink{namespacemakeopticalelements_a1b408449683f6bcc96ee25d4bbc1aa8b}{abt} (i, j, ft, nspec)
\begin{DoxyCompactList}\small\item\em calculates matrix elements Alpha-\/\+Beta$\ast$$\ast$T  for M = (A B ) (B$\ast$ A$\ast$) computes A\+B$\ast$$\ast$T and returns the i,j-\/th element \end{DoxyCompactList}\item 
complex(kind=dp) function \hyperlink{namespacemakeopticalelements_a7d0e54a1c7f830fd961f3c99d0a49b30}{bbd} (i, j, ft, nspec)
\begin{DoxyCompactList}\small\item\em calculates the matrix elements Beta$\ast$\+Beta$\ast$$\ast$H  for M = (A B ) (B$\ast$ A$\ast$) computes B$\ast$\+B$\ast$$\ast$H (Hermitian conjg) and returns the i,j-\/th element \end{DoxyCompactList}\item 
subroutine \hyperlink{namespacemakeopticalelements_aefda61530c80eccf75e7065015af413d}{alloc\+\_\+temparrays} (nspace, nspec)
\begin{DoxyCompactList}\small\item\em allocates temp arrays for matrices \end{DoxyCompactList}\item 
subroutine \hyperlink{namespacemakeopticalelements_aab212aad9e53b7ae643456f9bc0b68cb}{dealloc\+\_\+temparrays}
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
real(kind=dp), public \hyperlink{namespacemakeopticalelements_ab4e48a98a0fb0756bb4eff6ece9623a8}{ident}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
module for building symplectic matrices for optical elements 

\subsection{Function/\+Subroutine Documentation}
\index{makeopticalelements@{makeopticalelements}!abt@{abt}}
\index{abt@{abt}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{abt(i, j, ft, nspec)}{abt(i, j, ft, nspec)}}]{\setlength{\rightskip}{0pt plus 5cm}complex(kind=dp) function makeopticalelements\+::abt (
\begin{DoxyParamCaption}
\item[{integer}]{i, }
\item[{integer}]{j, }
\item[{complex(kind=dp), dimension(\+:,\+:), intent(in), allocatable}]{ft, }
\item[{integer}]{nspec}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_a1b408449683f6bcc96ee25d4bbc1aa8b}{}\label{namespacemakeopticalelements_a1b408449683f6bcc96ee25d4bbc1aa8b}


calculates matrix elements Alpha-\/\+Beta$\ast$$\ast$T  for M = (A B ) (B$\ast$ A$\ast$) computes A\+B$\ast$$\ast$T and returns the i,j-\/th element 


\begin{DoxyParams}{Parameters}
{\em i} & input index 1 \\
\hline
{\em j} & input index 2 \\
\hline
{\em ft} & input symplectic transform matrix for the optical circuit \\
\hline
{\em nspec} & input number of spectral D\+OF \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000001}{Todo}]check this \end{DoxyRefDesc}
\index{makeopticalelements@{makeopticalelements}!alloc\+\_\+temparrays@{alloc\+\_\+temparrays}}
\index{alloc\+\_\+temparrays@{alloc\+\_\+temparrays}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{alloc\+\_\+temparrays(nspace, nspec)}{alloc_temparrays(nspace, nspec)}}]{\setlength{\rightskip}{0pt plus 5cm}subroutine makeopticalelements\+::alloc\+\_\+temparrays (
\begin{DoxyParamCaption}
\item[{integer, intent(in)}]{nspace, }
\item[{integer, intent(in)}]{nspec}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_aefda61530c80eccf75e7065015af413d}{}\label{namespacemakeopticalelements_aefda61530c80eccf75e7065015af413d}


allocates temp arrays for matrices 


\begin{DoxyParams}{Parameters}
{\em nspace} & input \\
\hline
{\em nspec} & input  allocates memory for ident\+\_\+spec a spectral size matrix for tensor producting.\\
\hline
\end{DoxyParams}
allocates mem for spatial\+\_\+work, array size of spatial modes

allocates mem for n\+\_\+work, work array size of alpha or beta in sympectic matrix \index{makeopticalelements@{makeopticalelements}!amp@{amp}}
\index{amp@{amp}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{amp(a)}{amp(a)}}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=dp) function makeopticalelements\+::amp (
\begin{DoxyParamCaption}
\item[{complex(kind=dp)}]{a}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_a0649740479f47221d009b8d496b78c8b}{}\label{namespacemakeopticalelements_a0649740479f47221d009b8d496b78c8b}


returns the absolute value squared $\vert$a$\vert$$\ast$$\ast$2 


\begin{DoxyParams}{Parameters}
{\em a} & input complex number to be $\vert$a$\vert$$\ast$$\ast$2 \\
\hline
\end{DoxyParams}
\index{makeopticalelements@{makeopticalelements}!bbd@{bbd}}
\index{bbd@{bbd}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{bbd(i, j, ft, nspec)}{bbd(i, j, ft, nspec)}}]{\setlength{\rightskip}{0pt plus 5cm}complex(kind=dp) function makeopticalelements\+::bbd (
\begin{DoxyParamCaption}
\item[{integer, intent(in)}]{i, }
\item[{integer, intent(in)}]{j, }
\item[{complex(kind=dp), dimension(\+:,\+:), intent(in), allocatable}]{ft, }
\item[{integer, intent(in)}]{nspec}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_a7d0e54a1c7f830fd961f3c99d0a49b30}{}\label{namespacemakeopticalelements_a7d0e54a1c7f830fd961f3c99d0a49b30}


calculates the matrix elements Beta$\ast$\+Beta$\ast$$\ast$H  for M = (A B ) (B$\ast$ A$\ast$) computes B$\ast$\+B$\ast$$\ast$H (Hermitian conjg) and returns the i,j-\/th element 


\begin{DoxyParams}{Parameters}
{\em i} & input index 1 \\
\hline
{\em j} & input index 2 \\
\hline
{\em ft} & input symplectic transform matrix for the optical circuit \\
\hline
{\em nspec} & input number of spectral D\+OF \\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000002}{Todo}]check this \end{DoxyRefDesc}
\index{makeopticalelements@{makeopticalelements}!dealloc\+\_\+temparrays@{dealloc\+\_\+temparrays}}
\index{dealloc\+\_\+temparrays@{dealloc\+\_\+temparrays}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{dealloc\+\_\+temparrays}{dealloc_temparrays}}]{\setlength{\rightskip}{0pt plus 5cm}subroutine makeopticalelements\+::dealloc\+\_\+temparrays (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_aab212aad9e53b7ae643456f9bc0b68cb}{}\label{namespacemakeopticalelements_aab212aad9e53b7ae643456f9bc0b68cb}
\index{makeopticalelements@{makeopticalelements}!g4@{g4}}
\index{g4@{g4}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{g4(ft, nspec)}{g4(ft, nspec)}}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=dp) function makeopticalelements\+::g4 (
\begin{DoxyParamCaption}
\item[{complex(kind=dp), dimension(\+:,\+:), intent(in), allocatable}]{ft, }
\item[{integer, intent(in)}]{nspec}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_af1a18704c55aa2efeb60157c81a80723}{}\label{namespacemakeopticalelements_af1a18704c55aa2efeb60157c81a80723}


calculates g4 using matrix elements sum  


\begin{DoxyParams}{Parameters}
{\em ft} & input is the full symplectic transform \\
\hline
{\em nspec} & input spectral D\+OF \\
\hline
\end{DoxyParams}
\index{makeopticalelements@{makeopticalelements}!make\+\_\+bs@{make\+\_\+bs}}
\index{make\+\_\+bs@{make\+\_\+bs}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{make\+\_\+bs(nspace, nspec, symp\+\_\+mat, m1, m2, theta)}{make_bs(nspace, nspec, symp_mat, m1, m2, theta)}}]{\setlength{\rightskip}{0pt plus 5cm}subroutine makeopticalelements\+::make\+\_\+bs (
\begin{DoxyParamCaption}
\item[{integer}]{nspace, }
\item[{integer}]{nspec, }
\item[{complex(kind=dp), dimension(\+:,\+:), allocatable}]{symp\+\_\+mat, }
\item[{integer}]{m1, }
\item[{integer}]{m2, }
\item[{real(kind=dp)}]{theta}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_a593a6ee34afdeebc8b4667791c8a144f}{}\label{namespacemakeopticalelements_a593a6ee34afdeebc8b4667791c8a144f}


makes beamsplitter symplectic matrix  takes in an allocated matrix for the beamsplitter matrix to be written to uses the private ident\+\_\+spec, spatial\+\_\+work, n\+\_\+work arrays 


\begin{DoxyParams}{Parameters}
{\em nspace} & is number of total spatial modes \\
\hline
{\em nspec} & is number of total spectral modes \\
\hline
{\em m\+\_\+bs} & allocated n$\ast$n matrix for beamsplitter \\
\hline
{\em m1} & is spatial mode 1 for beam splitter \\
\hline
{\em m2} & is spatial mode 2 for beam splitter \\
\hline
\end{DoxyParams}
\index{makeopticalelements@{makeopticalelements}!make\+\_\+sq@{make\+\_\+sq}}
\index{make\+\_\+sq@{make\+\_\+sq}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{make\+\_\+sq(nspace, nspec, symp\+\_\+mat, m1, m2, alpha, beta)}{make_sq(nspace, nspec, symp_mat, m1, m2, alpha, beta)}}]{\setlength{\rightskip}{0pt plus 5cm}subroutine makeopticalelements\+::make\+\_\+sq (
\begin{DoxyParamCaption}
\item[{integer}]{nspace, }
\item[{integer}]{nspec, }
\item[{complex(kind=dp), dimension(\+:,\+:), allocatable}]{symp\+\_\+mat, }
\item[{integer}]{m1, }
\item[{integer}]{m2, }
\item[{complex(kind=dp), dimension(\+:,\+:), intent(inout)}]{alpha, }
\item[{complex(kind=dp), dimension(\+:,\+:), intent(inout)}]{beta}
\end{DoxyParamCaption}
)}\hypertarget{namespacemakeopticalelements_a6658c2ce879c0bc4b2e5918064a6a308}{}\label{namespacemakeopticalelements_a6658c2ce879c0bc4b2e5918064a6a308}


make symplectic squeezing matrix from exponetiated J\+SA  a lot is broken... 

\begin{DoxyNote}{Note}
only works if modes are consectutive 
\end{DoxyNote}
\begin{DoxyNote}{Note}
alpha \& beta are 2 spatial modes and all spectral modes dim 2$\ast$nspace$\ast$nspec
\end{DoxyNote}
loop for alpha

check this is legal... full diag sq symp\+\_\+mat(m1s\+:m1s+nspec, m1s+n\+:m1s+nspec+n)=beta(1\+:nspec, 1+nspec\+:2$\ast$nspec)

probably not legal symp\+\_\+mat(m2s\+:m2s+nspec, m2s+n\+:m2s+nspec+n)=beta(nspec+1\+:2$\ast$nspec, 1\+:nspec)

loop for beta, offset to col+n 

\subsection{Variable Documentation}
\index{makeopticalelements@{makeopticalelements}!ident@{ident}}
\index{ident@{ident}!makeopticalelements@{makeopticalelements}}
\subsubsection[{\texorpdfstring{ident}{ident}}]{\setlength{\rightskip}{0pt plus 5cm}real(kind=dp), public makeopticalelements\+::ident}\hypertarget{namespacemakeopticalelements_ab4e48a98a0fb0756bb4eff6ece9623a8}{}\label{namespacemakeopticalelements_ab4e48a98a0fb0756bb4eff6ece9623a8}
