Spatial modes = 4
Spectral modes = 1
Total dim = 4

 Two mode squeezing on modes,  0 , 1
Two mode squeezer on modes,  2 , 3
Phase shift on modes.  2 phase angle pi/2
Beamsplitter on modes,  1 , 2 angle=  pi/4
⎡cosh(1)     0     0  0     0     sinh(1)  0  0⎤
⎢                                              ⎥
⎢   0     cosh(2)  0  0  sinh(2)     0     0  0⎥
⎢                                              ⎥
⎢   0        0     1  0     0        0     0  0⎥
⎢                                              ⎥
⎢   0        0     0  1     0        0     0  0⎥
⎢                                              ⎥
⎢   0     sinh(1)  0  0  cosh(1)     0     0  0⎥
⎢                                              ⎥
⎢sinh(2)     0     0  0     0     cosh(2)  0  0⎥
⎢                                              ⎥
⎢   0        0     0  0     0        0     1  0⎥
⎢                                              ⎥
⎣   0        0     0  0     0        0     0  1⎦
⎡1  0     0        0     0  0     0        0   ⎤
⎢                                              ⎥
⎢0  1     0        0     0  0     0        0   ⎥
⎢                                              ⎥
⎢0  0  cosh(1)     0     0  0     0     sinh(1)⎥
⎢                                              ⎥
⎢0  0     0     cosh(2)  0  0  sinh(2)     0   ⎥
⎢                                              ⎥
⎢0  0     0        0     1  0     0        0   ⎥
⎢                                              ⎥
⎢0  0     0        0     0  1     0        0   ⎥
⎢                                              ⎥
⎢0  0     0     sinh(1)  0  0  cosh(1)     0   ⎥
⎢                                              ⎥
⎣0  0  sinh(2)     0     0  0     0     cosh(2)⎦
⎡1  0  0  0  0  0  0   0⎤
⎢                       ⎥
⎢0  1  0  0  0  0  0   0⎥
⎢                       ⎥
⎢0  0  ⅈ  0  0  0  0   0⎥
⎢                       ⎥
⎢0  0  0  1  0  0  0   0⎥
⎢                       ⎥
⎢0  0  0  0  1  0  0   0⎥
⎢                       ⎥
⎢0  0  0  0  0  1  0   0⎥
⎢                       ⎥
⎢0  0  0  0  0  0  -ⅈ  0⎥
⎢                       ⎥
⎣0  0  0  0  0  0  0   1⎦
⎡1   0     0    0  0    0       0     0⎤
⎢                                      ⎥
⎢    √2   √2⋅ⅈ                         ⎥
⎢0   ──   ────  0  0    0       0     0⎥
⎢    2     2                           ⎥
⎢                                      ⎥
⎢   √2⋅ⅈ   √2                          ⎥
⎢0  ────   ──   0  0    0       0     0⎥
⎢    2     2                           ⎥
⎢                                      ⎥
⎢0   0     0    1  0    0       0     0⎥
⎢                                      ⎥
⎢0   0     0    0  1    0       0     0⎥
⎢                                      ⎥
⎢                       √2    -√2⋅ⅈ    ⎥
⎢0   0     0    0  0    ──    ──────  0⎥
⎢                       2       2      ⎥
⎢                                      ⎥
⎢                     -√2⋅ⅈ     √2     ⎥
⎢0   0     0    0  0  ──────    ──    0⎥
⎢                       2       2      ⎥
⎢                                      ⎥
⎣0   0     0    0  0    0       0     1⎦
False

 Numerics 

⎡cosh(1)     0     0  0     0     sinh(1)  0  0⎤
⎢                                              ⎥
⎢   0     cosh(2)  0  0  sinh(2)     0     0  0⎥
⎢                                              ⎥
⎢   0        0     1  0     0        0     0  0⎥
⎢                                              ⎥
⎢   0        0     0  1     0        0     0  0⎥
⎢                                              ⎥
⎢   0     sinh(1)  0  0  cosh(1)     0     0  0⎥
⎢                                              ⎥
⎢sinh(2)     0     0  0     0     cosh(2)  0  0⎥
⎢                                              ⎥
⎢   0        0     0  0     0        0     1  0⎥
⎢                                              ⎥
⎣   0        0     0  0     0        0     0  1⎦
⎡   0     sinh(1)⎤
⎢                ⎥
⎣sinh(2)     0   ⎦

 Squeeze matrix


numerical Svd

After svd doing u*s*v


Original sq matrix

6.21724893790088e-15

#############################################
#######        Close enough     #############
#############################################

⎡cosh(r₁)     0      0  0     0      sinh(r₁)  0  0⎤
⎢                                                  ⎥
⎢   0      cosh(r₂)  0  0  sinh(r₂)     0      0  0⎥
⎢                                                  ⎥
⎢   0         0      1  0     0         0      0  0⎥
⎢                                                  ⎥
⎢   0         0      0  1     0         0      0  0⎥
⎢                                                  ⎥
⎢              ⎛__⎞            ⎛__⎞                ⎥
⎢   0      sinh⎝r₁⎠  0  0  cosh⎝r₁⎠     0      0  0⎥
⎢                                                  ⎥
⎢    ⎛__⎞                                ⎛__⎞      ⎥
⎢sinh⎝r₂⎠     0      0  0     0      cosh⎝r₂⎠  0  0⎥
⎢                                                  ⎥
⎢   0         0      0  0     0         0      1  0⎥
⎢                                                  ⎥
⎣   0         0      0  0     0         0      0  1⎦
⎡1  0     0         0      0  0     0         0    ⎤
⎢                                                  ⎥
⎢0  1     0         0      0  0     0         0    ⎥
⎢                                                  ⎥
⎢0  0  cosh(r₅)     0      0  0     0      sinh(r₅)⎥
⎢                                                  ⎥
⎢0  0     0      cosh(r₆)  0  0  sinh(r₆)     0    ⎥
⎢                                                  ⎥
⎢0  0     0         0      1  0     0         0    ⎥
⎢                                                  ⎥
⎢0  0     0         0      0  1     0         0    ⎥
⎢                                                  ⎥
⎢                    ⎛__⎞            ⎛__⎞          ⎥
⎢0  0     0      sinh⎝r₅⎠  0  0  cosh⎝r₅⎠     0    ⎥
⎢                                                  ⎥
⎢          ⎛__⎞                                ⎛__⎞⎥
⎣0  0  sinh⎝r₆⎠     0      0  0     0      cosh⎝r₆⎠⎦
⎡1    0    0  0  0    0     0  0⎤
⎢                               ⎥
⎢    ⅈ⋅θ₀                       ⎥
⎢0  ℯ      0  0  0    0     0  0⎥
⎢                               ⎥
⎢0    0    1  0  0    0     0  0⎥
⎢                               ⎥
⎢0    0    0  1  0    0     0  0⎥
⎢                               ⎥
⎢0    0    0  0  1    0     0  0⎥
⎢                               ⎥
⎢                       __      ⎥
⎢                    -ⅈ⋅θ₀      ⎥
⎢0    0    0  0  0  ℯ       0  0⎥
⎢                               ⎥
⎢0    0    0  0  0    0     1  0⎥
⎢                               ⎥
⎣0    0    0  0  0    0     0  1⎦
⎡1     0         0      0  0      0          0      0⎤
⎢                                                    ⎥
⎢0   cos(φ)   ⅈ⋅sin(φ)  0  0      0          0      0⎥
⎢                                                    ⎥
⎢0  ⅈ⋅sin(φ)   cos(φ)   0  0      0          0      0⎥
⎢                                                    ⎥
⎢0     0         0      1  0      0          0      0⎥
⎢                                                    ⎥
⎢0     0         0      0  1      0          0      0⎥
⎢                                                    ⎥
⎢                                 ⎛_⎞          ⎛_⎞   ⎥
⎢0     0         0      0  0   cos⎝φ⎠    -ⅈ⋅sin⎝φ⎠  0⎥
⎢                                                    ⎥
⎢                                   ⎛_⎞      ⎛_⎞     ⎥
⎢0     0         0      0  0  -ⅈ⋅sin⎝φ⎠   cos⎝φ⎠    0⎥
⎢                                                    ⎥
⎣0     0         0      0  0      0          0      1⎦

C matrix

⎡cosh(r₁)     0      0  0⎤
⎢                        ⎥
⎢   0      cosh(r₂)  0  0⎥
⎢                        ⎥
⎢   0         0      1  0⎥
⎢                        ⎥
⎣   0         0      0  1⎦

S matrix

⎡   0      sinh(r₁)  0  0⎤
⎢                        ⎥
⎢sinh(r₂)     0      0  0⎥
⎢                        ⎥
⎢   0         0      0  0⎥
⎢                        ⎥
⎣   0         0      0  0⎦

 mode transform
False


C matrix

⎡cosh(r₁)     0         0         0    ⎤
⎢                                      ⎥
⎢   0      cosh(r₂)     0         0    ⎥
⎢                                      ⎥
⎢   0         0      cosh(r₅)     0    ⎥
⎢                                      ⎥
⎣   0         0         0      cosh(r₆)⎦

S matrix

⎡   0      sinh(r₁)     0         0    ⎤
⎢                                      ⎥
⎢sinh(r₂)     0         0         0    ⎥
⎢                                      ⎥
⎢   0         0         0      sinh(r₅)⎥
⎢                                      ⎥
⎣   0         0      sinh(r₆)     0    ⎦

 mode transform
False


C matrix

⎡cosh(r₁)        0            0         0    ⎤
⎢                                            ⎥
⎢           ⅈ⋅θ₀                             ⎥
⎢   0      ℯ    ⋅cosh(r₂)     0         0    ⎥
⎢                                            ⎥
⎢   0            0         cosh(r₅)     0    ⎥
⎢                                            ⎥
⎣   0            0            0      cosh(r₆)⎦

S matrix

⎡      0         sinh(r₁)     0         0    ⎤
⎢                                            ⎥
⎢ ⅈ⋅θ₀                                       ⎥
⎢ℯ    ⋅sinh(r₂)     0         0         0    ⎥
⎢                                            ⎥
⎢      0            0         0      sinh(r₅)⎥
⎢                                            ⎥
⎣      0            0      sinh(r₆)     0    ⎦

 mode transform
False


C matrix

⎡cosh(r₁)             0                     0             0    ⎤
⎢                                                              ⎥
⎢            ⅈ⋅θ₀                                              ⎥
⎢   0       ℯ    ⋅cos(φ)⋅cosh(r₂)   ⅈ⋅sin(φ)⋅cosh(r₅)     0    ⎥
⎢                                                              ⎥
⎢             ⅈ⋅θ₀                                             ⎥
⎢   0      ⅈ⋅ℯ    ⋅sin(φ)⋅cosh(r₂)   cos(φ)⋅cosh(r₅)      0    ⎥
⎢                                                              ⎥
⎣   0                 0                     0          cosh(r₆)⎦

S matrix

⎡           0             sinh(r₁)     0              0        ⎤
⎢                                                              ⎥
⎢  ⅈ⋅θ₀                                                        ⎥
⎢ ℯ    ⋅cos(φ)⋅sinh(r₂)      0         0      ⅈ⋅sin(φ)⋅sinh(r₅)⎥
⎢                                                              ⎥
⎢   ⅈ⋅θ₀                                                       ⎥
⎢ⅈ⋅ℯ    ⋅sin(φ)⋅sinh(r₂)     0         0       cos(φ)⋅sinh(r₅) ⎥
⎢                                                              ⎥
⎣           0                0      sinh(r₆)          0        ⎦

 mode transform
False















                     ________                    
b(out_00) = sinh(r₁)⋅b(in_10) + cosh(r₁)⋅b(in_00)
             ⅈ⋅θ₀                 ________    ⅈ⋅θ₀                                              _______
b(out_10) = ℯ    ⋅cos(φ)⋅sinh(r₂)⋅b(in_00) + ℯ    ⋅cos(φ)⋅cosh(r₂)⋅b(in_10) + ⅈ⋅sin(φ)⋅sinh(r₅)⋅b(in_30

_                             
) + ⅈ⋅sin(φ)⋅cosh(r₅)⋅b(in_20)
               ⅈ⋅θ₀                 ________      ⅈ⋅θ₀                                            _____
b(out_20) = ⅈ⋅ℯ    ⋅sin(φ)⋅sinh(r₂)⋅b(in_00) + ⅈ⋅ℯ    ⋅sin(φ)⋅cosh(r₂)⋅b(in_10) + cos(φ)⋅sinh(r₅)⋅b(in_

___                           
30) + cos(φ)⋅cosh(r₅)⋅b(in_20)
                     ________                    
b(out_30) = sinh(r₆)⋅b(in_20) + cosh(r₆)⋅b(in_30)
b(out_00) b(in_00)
0
   ⅈ⋅θ₀                                    ⎛________  ________⎞    ⅈ⋅θ₀                                
- ℯ    ⋅cos(φ)⋅sinh(r₁)⋅sinh(r₂)⋅Commutator⎝b(in_00), b(in_10)⎠ + ℯ    ⋅cos(φ)⋅sinh(r₁)⋅cosh(r₂)⋅Commut

    ⎛________          ⎞    ⅈ⋅θ₀                                    ⎛________          ⎞               
ator⎝b(in_10), b(in_10)⎠ - ℯ    ⋅cos(φ)⋅sinh(r₂)⋅cosh(r₁)⋅Commutator⎝b(in_00), b(in_00)⎠ + ⅈ⋅sin(φ)⋅sin

                         ⎛________  ________⎞                                        ⎛________         
h(r₁)⋅sinh(r₅)⋅Commutator⎝b(in_10), b(in_30)⎠ + ⅈ⋅sin(φ)⋅sinh(r₁)⋅cosh(r₅)⋅Commutator⎝b(in_10), b(in_20

 ⎞                                        ⎛________          ⎞
)⎠ - ⅈ⋅sin(φ)⋅sinh(r₅)⋅cosh(r₁)⋅Commutator⎝b(in_30), b(in_00)⎠
